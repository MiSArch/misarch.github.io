"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[44440],{55448:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>t,metadata:()=>c,toc:()=>o});var s=i(85893),r=i(11151),d=i(4106);const t={},a="Catalog Service",c={id:"docs/dev-manuals/services/catalog",title:"Catalog Service",description:"The catalog service consists of the bounded contexts Catalog, Category, and CategoryValue.",source:"@site/docs/docs/dev-manuals/services/catalog.mdx",sourceDirName:"docs/dev-manuals/services",slug:"/docs/dev-manuals/services/catalog",permalink:"/docs/docs/dev-manuals/services/catalog",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Address Service",permalink:"/docs/docs/dev-manuals/services/address"},next:{title:"Discount Service",permalink:"/docs/docs/dev-manuals/services/discount"}},l={},o=[{value:"Domain Model",id:"domain-model",level:2},{value:"API",id:"api",level:2},{value:"Technology Stack",id:"technology-stack",level:2},{value:"Repository Structure",id:"repository-structure",level:2},{value:"Defined Events",id:"defined-events",level:2},{value:"Published Defined Events",id:"published-defined-events",level:3},{value:"catalog/product/created",id:"catalogproductcreated",level:4},{value:"catalog/product-variant/created",id:"catalogproduct-variantcreated",level:4},{value:"catalog/product-variant-version/created",id:"catalogproduct-variant-versioncreated",level:4},{value:"catalog/category/created",id:"catalogcategorycreated",level:4},{value:"catalog/product/updated",id:"catalogproductupdated",level:4},{value:"catalog/product-variant/updated",id:"catalogproduct-variantupdated",level:4},{value:"Subscribed Defined Events",id:"subscribed-defined-events",level:3},{value:"Imported Events",id:"imported-events",level:2},{value:"Published Imported Events",id:"published-imported-events",level:3},{value:"Subscribed Imported Events",id:"subscribed-imported-events",level:3},{value:"Important ADRs",id:"important-adrs",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"catalog-service",children:"Catalog Service"}),"\n",(0,s.jsxs)(n.p,{children:["The catalog service consists of the bounded contexts ",(0,s.jsx)(n.code,{children:"Catalog"}),", ",(0,s.jsx)(n.code,{children:"Category"}),", and ",(0,s.jsx)(n.code,{children:"CategoryValue"}),".\nIt is responsible for managing products, their variants and versions, categories, and their respective characteristics and values."]}),"\n",(0,s.jsx)(n.h2,{id:"domain-model",children:"Domain Model"}),"\n",(0,s.jsx)(d.Z,{path:"/renderedDiagrams/catalogDomainModel",width:"1240.06640625",height:"946.625"}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"Imported entities from other bounded contexts are marked with a dashed border."})}),"\n",(0,s.jsx)(n.h2,{id:"api",children:"API"}),"\n",(0,s.jsxs)(n.p,{children:["The service provides a GraphQL API, which is documented in the ",(0,s.jsx)(n.a,{href:"/docs/graphql/catalog",children:"GraphQL API documentation"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"technology-stack",children:"Technology Stack"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Language"}),": Kotlin"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Framework"}),": Spring Boot"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"GraphQL Library"}),": GraphQL Kotlin"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Database"}),": PostgreSQL"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Schema Management"}),": Flyway"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"repository-structure",children:"Repository Structure"}),"\n",(0,s.jsx)(n.p,{children:"The repository is structured as follows:"}),"\n",(0,s.jsx)("div",{className:"repository-structure",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/src/main/"}),": Source code of the service","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"kotlin/org/misarch/catalog/"}),": Kotlin source code","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"event/"}),": Dapr event handling","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"model/"}),": Event DTOs"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"graphql/"}),": GraphQL API","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"dataloader/"}),": Data loaders for efficient data fetching"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"federation/"}),": Apollo Federation entity resolvers"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"input/"}),": Input types for mutations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"model/"}),": GraphQL types","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"connection/"}),": Connection types and logic for paginated queries"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"persistance/"}),": Database entities and repositories","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"model/"}),": R2DBC entities"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"repository/"}),": Spring Data R2DBC repositories"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"service/"}),": Service logic"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"resources/"}),": Spring Boot application configuration and SQL schema migration files","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"db/migration/"}),": Flyway SQL schema migration files"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,s.jsx)(n.h2,{id:"defined-events",children:"Defined Events"}),"\n",(0,s.jsx)(n.p,{children:"This section lists events that are defined by the catalog service and can be used by other services."}),"\n",(0,s.jsx)(n.h3,{id:"published-defined-events",children:"Published Defined Events"}),"\n",(0,s.jsx)(n.h4,{id:"catalogproductcreated",children:"catalog/product/created"}),"\n",(0,s.jsx)(n.p,{children:"This event is published when a new product is created."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"{\n  id: string,\n  internalName: string,\n  isPubliclyVisible: boolean,\n  defaultVariantId: string,\n  categoryIds: string[]\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"catalogproduct-variantcreated",children:"catalog/product-variant/created"}),"\n",(0,s.jsx)(n.p,{children:"This event is published when a new product variant is created.\nThis includes the default variant created when a product is created."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"{\n  id: string,\n  productId: string,\n  currentVersionId: string,\n  isPubliclyVisible: boolean\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"catalogproduct-variant-versioncreated",children:"catalog/product-variant-version/created"}),"\n",(0,s.jsx)(n.p,{children:"This event is published when a new product variant version is created.\nThis includes the initial version created when a product variant is created."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"{\n  id: string,\n  name: string,\n  description: string,\n  version: number,\n  retailPrice: number,\n  createdAt: string,\n  canBeReturnedForDays?: number,\n  productVariantId: string,\n  taxRateId: string,\n  weight: number,\n  mediaIds: string[]\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"catalogcategorycreated",children:"catalog/category/created"}),"\n",(0,s.jsx)(n.p,{children:"This event is published when a new category is created."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"{\n  id: string,\n  name: string,\n  description: string\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"catalogproductupdated",children:"catalog/product/updated"}),"\n",(0,s.jsx)(n.p,{children:"This event is published when a product is updated."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"{\n  id: string,\n  internalName: string,\n  isPubliclyVisible: boolean,\n  defaultVariantId: string,\n  categoryIds: string[]\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"catalogproduct-variantupdated",children:"catalog/product-variant/updated"}),"\n",(0,s.jsx)(n.p,{children:"This event is published when a product variant is updated."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"{\n  id: string,\n  isPubliclyVisible: boolean\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"subscribed-defined-events",children:"Subscribed Defined Events"}),"\n",(0,s.jsx)(n.p,{children:"n/a"}),"\n",(0,s.jsx)(n.h2,{id:"imported-events",children:"Imported Events"}),"\n",(0,s.jsx)(n.p,{children:"This section lists events defined by other services that are used by the catalog service."}),"\n",(0,s.jsx)(n.h3,{id:"published-imported-events",children:"Published Imported Events"}),"\n",(0,s.jsx)(n.p,{children:"n/a"}),"\n",(0,s.jsx)(n.h3,{id:"subscribed-imported-events",children:"Subscribed Imported Events"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/docs/dev-manuals/services/tax#taxtax-rate-versioncreated",children:"tax/tax-rate/created"}),": Used to import ",(0,s.jsx)(n.code,{children:"TaxRate"})," from the ",(0,s.jsx)(n.code,{children:"Tax"})," bounded context."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"/docs/docs/dev-manuals/services/media#mediamediacreated",children:"media/media/created"}),": Used to import ",(0,s.jsx)(n.code,{children:"Media"})," from the ",(0,s.jsx)(n.code,{children:"Media"})," bounded context."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"important-adrs",children:"Important ADRs"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/docs/dev-manuals/adr/merge-category-and-product-service",children:"Merge Category and Product Service"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/docs/dev-manuals/adr/no-category-hierarchy",children:"No category hierarchy"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},4106:(e,n,i)=>{i.d(n,{Z:()=>o});var s=i(92949),r=i(44996),d=i(67294),t=i(99276),a=i(85893);function c(e){let{image:n}=e;const s=(0,d.useId)();return(0,d.useEffect)((()=>{let e=new t.Z({gallery:"#"+CSS.escape(s),children:"a",pswpModule:()=>i.e(15826).then(i.bind(i,15826))});return e.init(),()=>{e.destroy(),e=null}}),[]),(0,a.jsx)("div",{className:"pswp-gallery",id:s,children:(0,a.jsx)("a",{href:n.url,"data-pswp-width":n.width,"data-pswp-height":n.height,target:"_blank",rel:"noreferrer",children:(0,a.jsx)("img",{src:n.url,alt:n.alt})},s+"-0")})}var l=i(91262);function o(e){let{path:n,extension:i,alt:d,width:t,height:o}=e;const{colorMode:h}=(0,s.I)(),u={url:(0,r.Z)(`${n}-${h}.${i??"svg"}`),alt:d,width:t,height:o};return(0,a.jsx)(l.Z,{children:()=>(0,a.jsx)(c,{image:u})})}}}]);