"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[89671],{8349:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>a});var i=s(85893),t=s(11151);const r={},o="Frontend",c={id:"docs/dev-manuals/services/frontend",title:"Frontend",description:"This document is still under development.",source:"@site/docs/docs/dev-manuals/services/frontend.mdx",sourceDirName:"docs/dev-manuals/services",slug:"/docs/dev-manuals/services/frontend",permalink:"/docs/docs/dev-manuals/services/frontend",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Discount Service",permalink:"/docs/docs/dev-manuals/services/discount"},next:{title:"Gateway",permalink:"/docs/docs/dev-manuals/services/gateway"}},l={},a=[{value:"Technology Stack",id:"technology-stack",level:2},{value:"Repository Structure",id:"repository-structure",level:2},{value:"Files That Play An Important Role",id:"files-that-play-an-important-role",level:3},{value:"Hierarchy Of The Layout Components",id:"hierarchy-of-the-layout-components",level:2},{value:"Important Components",id:"important-components",level:2},{value:"The Pinia store",id:"the-pinia-store",level:3},{value:"The GraphQL client",id:"the-graphql-client",level:3},{value:"The error handler",id:"the-error-handler",level:3},{value:"Technical Debt",id:"technical-debt",level:2},{value:"Coding Guidelines",id:"coding-guidelines",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"frontend",children:"Frontend"}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsx)(n.p,{children:"This document is still under development."})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"This documentation is primarily intended for software developers."})}),"\n",(0,i.jsxs)(n.p,{children:["First things first, the GitHub ",(0,i.jsx)(n.strong,{children:"repository"})," can be found ",(0,i.jsx)(n.a,{href:"https://github.com/MiSArch/frontend",children:"here"}),", the Gropius component for ",(0,i.jsx)(n.strong,{children:"issue tracking"})," can be found ",(0,i.jsx)(n.a,{href:"https://frontend.gropius.duckdns.org/components/9d12d6ac-e85a-407c-bdff-a8321fb75d3a",children:"here"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"technology-stack",children:"Technology Stack"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["JavaScript Framework: ",(0,i.jsx)(n.a,{href:"https://vuejs.org/guide/introduction.html#what-is-vue",children:"Vue"})]}),"\n",(0,i.jsx)(n.li,{children:"Programming Languages: mainly TypeScript and standard HTML within Vue components"}),"\n",(0,i.jsxs)(n.li,{children:["UI Library: ",(0,i.jsx)(n.a,{href:"https://vuetifyjs.com/en/",children:"Vuetify"})]}),"\n",(0,i.jsxs)(n.li,{children:["Package Manager: ",(0,i.jsx)(n.a,{href:"https://yarnpkg.com",children:"Yarn"})," -- Instructions for the most important yarn commands can be found in the README.md in the repository."]}),"\n",(0,i.jsx)(n.li,{children:"Tooling: ESLint, Prettier, GraphQL Codegen"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"repository-structure",children:"Repository Structure"}),"\n",(0,i.jsx)("div",{className:"repository-structure",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"/src/"}),": The source code","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"assets/"}),": assets to include in the website. Currently unused."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"components/"}),": ",(0,i.jsx)(n.a,{href:"https://vuejs.org/glossary/#single-file-component",children:"Single-File Components"})," that can be reused -- this is basically an internal UI components library."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"graphql/"}),": Source code files that form the GraphQL client for the calls to the gateway."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"layouts/"}),": ",(0,i.jsx)(n.a,{href:"https://vuejs.org/glossary/#sfc",children:"SFCs"})," responsible for the general layout of a page of the web application."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"plugins/"}),": Source code related to the plugins of the web application: Vuetify, Vue Router, and Pinia."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"router/"}),": The app-specific logic of the router is implemented here, enabling navigation between the many views."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"store/"}),": The Pinia store manages the state of the application, including data and UI state, in a centralized and reactive manner, facilitating state manipulation and sharing across components."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"strings/"}),": The string resources of the application, such as error messages."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"styles/"}),": Files dedicated to styling the web application -- this has been left untouched since the initialization of the repository."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"util/"}),": Utility source code."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"views/"}),": SFCs, each of which represents a single web page and therefore a route of the Vue Router."]}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,i.jsx)(n.h3,{id:"files-that-play-an-important-role",children:"Files That Play An Important Role"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"codegen.yaml"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"src/graphql/client.ts"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"src/router/index.ts"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"src/store/app.ts"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"src/util/errorHandler.ts"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"src/layouts/default/TheDefaultLayout.vue"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"hierarchy-of-the-layout-components",children:"Hierarchy Of The Layout Components"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"src/layouts/default/TheDefaultLayout.vue"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"src/layouts/default/TheAppBar.vue"})}),"\n",(0,i.jsx)(n.li,{children:"..."}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"src/layouts/default/TheViewPlaceHolder.vue"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"v-main"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"router-view"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"src/components/Notifications.vue"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The Vue Router places the current route's view (one of the views in ",(0,i.jsx)(n.code,{children:"src/views"}),") into ",(0,i.jsx)(n.code,{children:"router-view"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Some remarks regarding the aforementioned components:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Each page is an instance of src/layouts/default/TheDefaultLayout.vue."}),"\n",(0,i.jsx)(n.li,{children:"The default layout comprises the app bar, two navigation drawers (one left, one right), and a placeholder for the actual view."}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"src/components/Notifications.vue"})," serves as the notification center of the application and only becomes visible when a notification is pushed to the user."]}),"\n",(0,i.jsxs)(n.li,{children:["The Vue Router maps routes to ",(0,i.jsx)(n.code,{children:"src/views"})," and places the current route's view into the router-view component."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"important-components",children:"Important Components"}),"\n",(0,i.jsx)(n.p,{children:"The most important components are:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The Pinia store"}),"\n",(0,i.jsx)(n.li,{children:"The GraphQL client"}),"\n",(0,i.jsx)(n.li,{children:"The error handler"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"the-pinia-store",children:"The Pinia store"}),"\n",(0,i.jsxs)(n.p,{children:["The role of the ",(0,i.jsx)(n.a,{href:"https://pinia.vuejs.org",children:"Pinia"})," Store in Vue is to manage the state of the application in a centralized and reactive manner, facilitating state manipulation and sharing across components."]}),"\n",(0,i.jsx)(n.p,{children:"The store manages:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"login state"}),"\n",(0,i.jsx)(n.li,{children:"the active user role"}),"\n",(0,i.jsx)(n.li,{children:"the user's shopping cart"}),"\n",(0,i.jsx)(n.li,{children:"the notification queue"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"the-graphql-client",children:"The GraphQL client"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["GraphQL queries and mutations can be found in the ",(0,i.jsx)(n.code,{children:".graphql"})," files where the name of the file is one of the bounded contexts of the microservice landscape. For example, \xb4catalog.graphql` contains the queries and mutations for calling the catalog service."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"src/graphql/generated.ts"})," has to be generated by running ",(0,i.jsx)(n.code,{children:"yarn codegen"}),"; based on ",(0,i.jsx)(n.code,{children:"codegen.yaml"}),", the file then gets generated."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"src/graphql/client.ts"})," resembles the interface to make calls to the Gateway via its function ",(0,i.jsx)(n.code,{children:"useClient()"}),". The following code snippet taken from ",(0,i.jsx)(n.code,{children:"src/views/ProductView.vue"})," shows how to use ",(0,i.jsx)(n.code,{children:"useClient()"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:'/**\n * The GraphQL client to use for all GraphQL requests.\n */\nconst client = useClient();\n\n/**\n * Gets the "entire" product from the catalog service.\n */\nconst product = asyncComputed(\n  async () => {\n    return client.getProduct({\n      id: id.value\n    });\n  },\n  null,\n  {\n    onError: (e) => pushErrorNotification(errorMessages.getProduct, e),\n    shallow: false\n  }\n);\n'})}),"\n",(0,i.jsxs)(n.p,{children:['Note that the GraphQL query "behind" ',(0,i.jsx)(n.code,{children:"getProduct()"})," has been defined in ",(0,i.jsx)(n.code,{children:"src/graphql/catalog.graphql"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"the-error-handler",children:"The error handler"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"src/util/errorHandler.ts"})," provides intuitive helper functions for wrapping synchronous as well as asynchronous actions into ",(0,i.jsx)(n.code,{children:"try-catch"})," blocks in order to push an error notification if the actions fails."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"/**\n * Requests the restocking of the selected product variant.\n */\nasync function restock() {\n    if (activeUserRoleIsEitherAdminOrEmployee.value && canRestock) {\n        await awaitActionAndPushErrorIfNecessary(() => {\n            return client.createProductItemBatch({\n                input: {\n                    productVariantId: selectedProductVariantId.value,\n                    number: parseInt(amount.value as string),\n                },\n            })\n        }, errorMessages.createProductItemBatch)\n\n        emit('restocked')\n    }\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["In this code example ",(0,i.jsx)(n.code,{children:"awaitActionAndPushErrorIfNecessary()"})," (one of the error handler's functions) is called with two arguments:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"the asynchronous action"}),"\n",(0,i.jsx)(n.li,{children:"the error message if the action fails: errorMessages.createProductItemBatch"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Whenever the failure of a function call should be communicated to the user, use one of the error handler's functions."})}),"\n",(0,i.jsx)(n.h2,{id:"technical-debt",children:"Technical Debt"}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsx)(n.p,{children:"This section is written from the personal perspective of the main frontend developer during the time of the EnPro."})}),"\n",(0,i.jsx)(n.p,{children:"Sadly, there is already some technical debt. Why? Because at the beginning of the project I was still a complete beginner when it came to frontend development with Vue, TypeScript, and JavaScript in general. Some things I only understood and learned to use properly over time meaning issue by issue. As we did not have the time to refactor everything as soon as possible, we had to prioritize the implementation of additional features to ensure that the frontend would be at least somehow feature-complete at the end of the project."}),"\n",(0,i.jsx)(n.p,{children:"Having said this, what kind of technical debt are we talking about?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Clones regarding the composition of smaller UI components. That means more custom SFCs could be extracted from the given DOM landscape."}),"\n",(0,i.jsxs)(n.li,{children:["A slight overuse of ",(0,i.jsx)(n.code,{children:"v-if"})," within SFCs instead of making good use of Vue's slot mechanism. See ",(0,i.jsx)(n.a,{href:"https://frontend.gropius.duckdns.org/components/9d12d6ac-e85a-407c-bdff-a8321fb75d3a/issues/4f780153-0e6a-4893-a3b9-4e019b74a2a8",children:"this Gropius issue"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Using events instead of custom models. See ",(0,i.jsx)(n.a,{href:"https://frontend.gropius.duckdns.org/components/9d12d6ac-e85a-407c-bdff-a8321fb75d3a/issues/4f780153-0e6a-4893-a3b9-4e019b74a2a8",children:"this Gropius issue"}),"."]}),"\n",(0,i.jsx)(n.li,{children:'"Many" dialogs have been implemented by now and the coding style regarding source code file structure, member naming, and event handling has deviated over time.'}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"coding-guidelines",children:"Coding Guidelines"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Every ",(0,i.jsx)(n.code,{children:"const"})," variable or ",(0,i.jsx)(n.code,{children:"ref"}),", ",(0,i.jsx)(n.code,{children:"interface"})," (or similar construct), as well as every ",(0,i.jsx)(n.code,{children:"function"}),", must be accompanied by a ",(0,i.jsx)(n.a,{href:"https://jsdoc.app",children:"JSDoc"})," comment."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},11151:(e,n,s)=>{s.d(n,{Z:()=>c,a:()=>o});var i=s(67294);const t={},r=i.createContext(t);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);