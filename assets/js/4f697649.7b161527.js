"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[97966],{43263:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>l,contentTitle:()=>c,default:()=>a,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var n=t(85893),r=t(11151);const i={},c="Kubernetes setup",o={id:"docs/dev-manuals/other-repositories/infrastructure-k8s",title:"Kubernetes setup",description:"The platform can be set up using the infrastructure-k8s repo.",source:"@site/docs/docs/dev-manuals/other-repositories/infrastructure-k8s.mdx",sourceDirName:"docs/dev-manuals/other-repositories",slug:"/docs/dev-manuals/other-repositories/infrastructure-k8s",permalink:"/docs/docs/dev-manuals/other-repositories/infrastructure-k8s",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Gatling Executor Service",permalink:"/docs/docs/dev-manuals/other-repositories/gatling-executor"},next:{title:"Simulation Service",permalink:"/docs/docs/dev-manuals/other-repositories/simulation"}},l={},d=[{value:"Technology Stack",id:"technology-stack",level:2},{value:"Repository Structure",id:"repository-structure",level:2}];function h(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h1,{id:"kubernetes-setup",children:"Kubernetes setup"}),"\n",(0,n.jsxs)(s.p,{children:["The platform can be set up using the ",(0,n.jsx)(s.a,{href:"https://github.com/MiSArch/infrastructure-k8s",children:"infrastructure-k8s"})," repo."]}),"\n",(0,n.jsx)(s.h2,{id:"technology-stack",children:"Technology Stack"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Language"}),": HCL (Hashicorp configuration language)"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Framework"}),": Terraform"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"Target"}),": Kubernetes Cluster"]}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"repository-structure",children:"Repository Structure"}),"\n",(0,n.jsx)(s.p,{children:"The repository is structured as follows:"}),"\n",(0,n.jsx)("div",{className:"repository-structure",children:(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/configmaps.tf"}),": Defines ConfigMaps used inside the cluster"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/dapr.tf"}),": Sets up Dapr"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/dbs-mongodb.tf"}),": Sets up Mongo DBs for the cluster"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/dbs-postgres.tf"}),": Sets up Postgres DBs for the cluster"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/influxdb.tf"}),": Sets up the InfluxDB used for storing Gatling Metrics of Experiments"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/ingress.tf"}),": Sets up a central cluster ingress to access the cluster"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/keycloak"}),": Keycloak submodule to grep the up to date MiSArch realm file"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/keycloak.tf"}),": Sets up Keycloak"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/latest-deployment.tfvars"}),": (optional, must be enabled (",(0,n.jsx)(s.code,{children:'-var-file="latest-deployment.tfvars"'}),")) Sets all used containers to the latest available version"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/main.tf"}),": Sets up Terraform itself"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/minio.tf"}),": Sets up minio"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-address.tf"}),": Sets up the Address deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-catalog.tf"}),": Sets up the Catalog deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-chaostoolkit-executor.tf"}),": Sets up the Chaos Toolkit Executor deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-discount.tf"}),": Sets up the Discount deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-experiment-config-frontend.tf"}),": Sets up the Experiment Config Frontend deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-experiment-config.tf"}),": Sets up the Experiment Config deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-experiment-exectuor.tf"}),": Sets up the Experiment Executor deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-experiment-executor-frontend.tf"}),": Sets up the Experiment Executor Frontend deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-frontend.tf"}),": Sets up the Frontend"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-gateway.tf"}),": Sets up the Gateway"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-gatling-executor.tf"}),": Sets up the Gatling Executor deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-inventory.tf"}),": Sets up the Inventory deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-invoice.tf"}),": Sets up the Invoice deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-media.tf"}),": Sets up the Media deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-notification.tf"}),": Sets up the Notification deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-order.tf"}),": Sets up the Order deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-payment.tf"}),": Sets up the Payment deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-return.tf"}),": Sets up the Return deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-review.tf"}),": Sets up the Review deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-shipment.tf"}),": Sets up the Shipment deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-shoppingcart.tf"}),": Sets up the Shopping Cart deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-simulation.tf"}),": Sets up the Simulation deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-tax.tf"}),": Sets up the Tax deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-user.tf"}),": Sets up the User deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/misarch-wishlist.tf"}),": Sets up the Wishlist deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/otel.tf"}),": Sets up an OpenTelemetry collector"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/passwords-mongodb.tf"}),": Defines passwords for MongoDBs used by the cluster"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/passwords.tf"}),": Defines passwords used by everything"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/rabbitmq.tf"}),": Sets up RabbitMQ"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/test-script.sh"}),": Script to avoid specifying variables prior to running ",(0,n.jsx)(s.code,{children:"terraform apply"})]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/variables-annotations.tf"}),": Defines annotations for the platform and for each deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/variables-labels.tf"}),": Defines labels for the platform and for each deployment"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/variables-misc.tf"}),": Defines variables that did not fit in any other category"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/variables-urls.tf"}),": Defines under which URLs services can be found"]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"/variables-versions.tf"}),": Defines the container versions"]}),"\n"]})})]})}function a(e={}){const{wrapper:s}={...(0,r.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},11151:(e,s,t)=>{t.d(s,{Z:()=>o,a:()=>c});var n=t(67294);const r={},i=n.createContext(r);function c(e){const s=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),n.createElement(i.Provider,{value:s},e.children)}}}]);