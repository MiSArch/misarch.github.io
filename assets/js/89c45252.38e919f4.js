"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[10631],{17915:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>c,toc:()=>d});var i=r(85893),n=r(11151);const a={sidebar_position:4},o="Merge Category and Product Service",c={id:"docs/dev-manuals/adr/merge-category-and-product-service",title:"Merge Category and Product Service",description:"Context and Problem Statement",source:"@site/docs/docs/dev-manuals/adr/0003-merge-category-and-product-service.md",sourceDirName:"docs/dev-manuals/adr",slug:"/docs/dev-manuals/adr/merge-category-and-product-service",permalink:"/docs/docs/dev-manuals/adr/merge-category-and-product-service",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"docsSidebar",previous:{title:"Use GraphQL Federation for API Gateway",permalink:"/docs/docs/dev-manuals/adr/use-graphql-federation"},next:{title:"No category hierarchy",permalink:"/docs/docs/dev-manuals/adr/no-category-hierarchy"}},s={},d=[{value:"Context and Problem Statement",id:"context-and-problem-statement",level:2},{value:"Considered Options",id:"considered-options",level:2},{value:"Decision Outcome",id:"decision-outcome",level:2},{value:"Pros and Cons of the Options",id:"pros-and-cons-of-the-options",level:2},{value:"Save characteristic values of product variants in product service and let category service request the needed information",id:"save-characteristic-values-of-product-variants-in-product-service-and-let-category-service-request-the-needed-information",level:3},{value:"Save characteristic values of product variants in category service and let product service request the needed information",id:"save-characteristic-values-of-product-variants-in-category-service-and-let-product-service-request-the-needed-information",level:3},{value:"Data duplication",id:"data-duplication",level:3},{value:"Merge category and product service",id:"merge-category-and-product-service-1",level:3}];function l(e){const t={del:"del",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...(0,n.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"merge-category-and-product-service",children:"Merge Category and Product Service"}),"\n",(0,i.jsx)(t.h2,{id:"context-and-problem-statement",children:"Context and Problem Statement"}),"\n",(0,i.jsx)(t.p,{children:"Category and product service are tightly coupled:\nThe majority of endpoints of each services needs to either invoke the other service or duplicate the others services data:\nA product variant holds a characteristic value, this needs to be either saved in the product or category service. It is valuable to know if product variants with specific characteristic actually exist, when displaying the product categories in the frontend with each category characteristic. This prevents the user from running into empty queries. We only want to show characteristics to filter by, if product variants of the specific characteristic exists. Therefore the category service needs to know about the current product variants.\nSimilarly, displaying a product variant includes its characteristic value, for example: size M for a t-shirt. Each product variant request depends on the characteristic value."}),"\n",(0,i.jsx)(t.p,{children:"A category can only be deleted if no product points to it. Should a category automatically be deleted if the last product referencing the category is deleted?"}),"\n",(0,i.jsx)(t.h2,{id:"considered-options",children:"Considered Options"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Save characteristic values of product variants in product service and let category service request the needed information"}),"\n",(0,i.jsx)(t.li,{children:"Save characteristic values of product variants in category service and let product service request the needed information"}),"\n",(0,i.jsx)(t.li,{children:"Data duplication in both services"}),"\n",(0,i.jsx)(t.li,{children:"Merge category and product service"}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.del,{children:"Shared database"})," (not up to discussion)"]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"decision-outcome",children:"Decision Outcome"}),"\n",(0,i.jsx)(t.p,{children:'Chosen option: "Merge category and product service", because'}),"\n",(0,i.jsx)(t.p,{children:"we have enough services to fulfill our requirement of 15 services. We do not see a clear cut that would still allow us to implement the functionality we want out of the system."}),"\n",(0,i.jsx)(t.h2,{id:"pros-and-cons-of-the-options",children:"Pros and Cons of the Options"}),"\n",(0,i.jsx)(t.h3,{id:"save-characteristic-values-of-product-variants-in-product-service-and-let-category-service-request-the-needed-information",children:"Save characteristic values of product variants in product service and let category service request the needed information"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Good, querying products / product variants does not require querying the category service"}),"\n",(0,i.jsx)(t.li,{children:"Bad, vice versa"}),"\n",(0,i.jsx)(t.li,{children:"Bad, queries induce overhead"}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"save-characteristic-values-of-product-variants-in-category-service-and-let-product-service-request-the-needed-information",children:"Save characteristic values of product variants in category service and let product service request the needed information"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Good, filtering products / product variants for categories does not require querying the product service"}),"\n",(0,i.jsx)(t.li,{children:"Bad, vice versa"}),"\n",(0,i.jsx)(t.li,{children:"Bad, queries induce overhead"}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"data-duplication",children:"Data duplication"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Bad, can lead to consistency problems"}),"\n",(0,i.jsx)(t.li,{children:"Good, sync might create less overhead than just queries"}),"\n",(0,i.jsx)(t.li,{children:"Bad, data duplications requires more memory"}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"merge-category-and-product-service-1",children:"Merge category and product service"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Bad, merging services reduces separation of concerns"}),"\n",(0,i.jsx)(t.li,{children:"Good, prevents significant network overhead"}),"\n",(0,i.jsx)(t.li,{children:"Neutral, one service less in total"}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,n.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},11151:(e,t,r)=>{r.d(t,{Z:()=>c,a:()=>o});var i=r(67294);const n={},a=i.createContext(n);function o(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);