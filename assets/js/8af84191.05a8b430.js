"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[94744],{201:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>d});var i=n(85893),s=n(11151);const o={sidebar_position:10},r="Check Entity Consitency",a={id:"docs/dev-manuals/adr/check-entity-consistency",title:"Check Entity Consitency",description:"Context and Problem Statement",source:"@site/docs/docs/dev-manuals/adr/0009-check-entity-consistency.md",sourceDirName:"docs/dev-manuals/adr",slug:"/docs/dev-manuals/adr/check-entity-consistency",permalink:"/docs/docs/dev-manuals/adr/check-entity-consistency",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:10,frontMatter:{sidebar_position:10},sidebar:"docsSidebar",previous:{title:"Storypoints",permalink:"/docs/docs/dev-manuals/adr/storypoints"},next:{title:"Service Health Endpoint",permalink:"/docs/docs/dev-manuals/adr/health-endpoint"}},c={},d=[{value:"Context and Problem Statement",id:"context-and-problem-statement",level:2},{value:"Considered Options",id:"considered-options",level:2},{value:"Decision Outcome",id:"decision-outcome",level:2},{value:"Pros and Cons of the Options",id:"pros-and-cons-of-the-options",level:2},{value:"import related entities into service by listening to dapr creation events created by the owning service",id:"import-related-entities-into-service-by-listening-to-dapr-creation-events-created-by-the-owning-service",level:3},{value:"send a request to the owning service to verify that the entity with a given ID is valid",id:"send-a-request-to-the-owning-service-to-verify-that-the-entity-with-a-given-id-is-valid",level:3}];function l(e){const t={h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"check-entity-consitency",children:"Check Entity Consitency"}),"\n",(0,i.jsx)(t.h2,{id:"context-and-problem-statement",children:"Context and Problem Statement"}),"\n",(0,i.jsx)(t.p,{children:"When creating a relation between entities of different services, we need to check if the referenced related entities managed by a different service are valid to use.\nMost importantly, does the given ID actually refer to an entity."}),"\n",(0,i.jsx)(t.h2,{id:"considered-options",children:"Considered Options"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"import related entities into service by listening to dapr creation events created by the owning service"}),"\n",(0,i.jsx)(t.li,{children:"send a request to the owning service to verify that the entity with a given ID is valid"}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"decision-outcome",children:"Decision Outcome"}),"\n",(0,i.jsx)(t.p,{children:'Chosen option: "import related entities into service by listening to dapr creation events created by the owning service", because\nresults in more loose coupling, as we don\'t have synchronous requests between services when creating the relations.\nNote that there might be exceptions in cases where this approach is not applicable.'}),"\n",(0,i.jsx)(t.h2,{id:"pros-and-cons-of-the-options",children:"Pros and Cons of the Options"}),"\n",(0,i.jsx)(t.h3,{id:"import-related-entities-into-service-by-listening-to-dapr-creation-events-created-by-the-owning-service",children:"import related entities into service by listening to dapr creation events created by the owning service"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Good, because more loosely coupled: no requests sent when creating the relation, instead async notifications via the event bus when entities are created"}),"\n",(0,i.jsx)(t.li,{children:"Neutral, because potentially more/less events/requests: reduces communication overhead when related entity is on average used more than once, otherwise increases overhead"}),"\n",(0,i.jsx)(t.li,{children:"Bad, because less enforced consistency: e.g. deletion events might be delayed, can cause temporary inconsistencies (as usual with loose coupling)"}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"send-a-request-to-the-owning-service-to-verify-that-the-entity-with-a-given-id-is-valid",children:"send a request to the owning service to verify that the entity with a given ID is valid"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Good, because results in stricter consistency: always validates current state"}),"\n",(0,i.jsx)(t.li,{children:"Neutral, because potentially more/less events/requests: reduces communication overhead when related entity is on average used less than once, otherwise increases overhead"}),"\n",(0,i.jsx)(t.li,{children:"Bad, because results in tight coupling between services: relation to foreign entity can only be created if synchronous request to other service is successful"}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},11151:(e,t,n)=>{n.d(t,{Z:()=>a,a:()=>r});var i=n(67294);const s={},o=i.createContext(s);function r(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);